---
title: 'Workflows'
api: 'GET /kyc/workflows'
---

Manage KYC onboarding workflows that define the steps and validation requirements for end-user onboarding processes. Workflows allow you to create customizable onboarding experiences with document upload, form fields, and automated validation checks.

## Overview

Workflows define the structure and steps for KYC onboarding sessions. Each workflow consists of:

- **Steps**: Sequential steps users must complete (document upload, form fields, etc.)
- **Validation Configuration**: Automated checks to run (OFAC, UN, crypto, adverse media)
- **Versioning**: Workflow updates create new versions while active sessions use their original version

## Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/kyc/workflows` | Create a new workflow |
| `POST` | `/kyc/workflows/from-template/{type}` | Create workflow from template |
| `GET` | `/kyc/workflows` | List all workflows |
| `GET` | `/kyc/workflows/{workflow_id}` | Get workflow details |
| `GET` | `/kyc/workflows/{workflow_id}/versions` | List workflow versions |
| `PUT` | `/kyc/workflows/{workflow_id}` | Update workflow (creates new version) |
| `DELETE` | `/kyc/workflows/{workflow_id}` | Soft delete workflow |

## Authentication

Requires `kyc:create` permission for creating workflows and `kyc:read` permission for retrieving workflows. Include your Bearer token in the Authorization header.

## Create Workflow

Create a new custom workflow.

### Endpoint

```
POST /kyc/workflows
```

### Request Body Parameters

<ParamFields>
  <ParamField
    name="name"
    type="string"
    required
    description="Workflow name"
  />
  <ParamField
    name="description"
    type="string"
    description="Workflow description"
  />
  <ParamField
    name="steps"
    type="array"
    required
    description="Array of workflow step objects"
  >
    <ParamField
      name="step_id"
      type="string"
      required
      description="Unique identifier for the step"
    />
    <ParamField
      name="order"
      type="integer"
      required
      description="Step order (1-based)"
    />
    <ParamField
      name="name"
      type="string"
      required
      description="Step display name"
    />
    <ParamField
      name="type"
      type="string"
      required
      description="Step type: 'document_upload', 'form_fill', 'liveness', or 'validation'"
    />
    <ParamField
      name="required_documents"
      type="array"
      description="Required document types (for document_upload steps): 'id', 'proof_of_address', 'company_charter', 'bank_ownership'"
    />
    <ParamField
      name="auto_extract"
      type="boolean"
      description="Whether to automatically extract data from documents (default: true)"
    />
    <ParamField
      name="custom_fields"
      type="array"
      description="Array of custom field objects (for form_fill steps)"
    />
  </ParamField>
  <ParamField
    name="validation_config"
    type="object"
    description="Validation configuration"
  >
    <ParamField
      name="run_lists"
      type="boolean"
      description="Run watchlist checks (OFAC, UN, etc.) (default: true)"
    />
    <ParamField
      name="run_crypto"
      type="boolean"
      description="Run crypto wallet checks (default: false)"
    />
    <ParamField
      name="run_adverse_media"
      type="boolean"
      description="Run adverse media checks (default: false)"
    />
  </ParamField>
</ParamFields>

### Step Types

| Type | Description |
|------|-------------|
| `document_upload` | Upload and extract document data |
| `form_fill` | Custom form fields for data collection |
| `liveness` | Placeholder for liveness check (future) |
| `validation` | Automated validation checks |

### Custom Field Types

| Type | Description |
|------|-------------|
| `text` | Text input |
| `number` | Number input |
| `date` | Date picker |
| `boolean` | Checkbox |
| `select` | Dropdown selection |
| `multi_select` | Multi-select dropdown |
| `file` | File upload |

### Request Example

```bash
curl -X POST https://stg.kyc.legaltalent.ai/kyc/workflows \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Basic KYC",
    "description": "Standard KYC onboarding workflow",
    "steps": [
      {
        "step_id": "step_1",
        "order": 1,
        "name": "ID Document",
        "type": "document_upload",
        "required_documents": ["id"],
        "auto_extract": true
      },
      {
        "step_id": "step_2",
        "order": 2,
        "name": "Proof of Address",
        "type": "document_upload",
        "required_documents": ["proof_of_address"],
        "auto_extract": true
      },
      {
        "step_id": "step_3",
        "order": 3,
        "name": "Personal Information",
        "type": "form_fill",
        "custom_fields": [
          {
            "field_id": "full_name",
            "name": "Full Name",
            "type": "text",
            "required": true
          },
          {
            "field_id": "date_of_birth",
            "name": "Date of Birth",
            "type": "date",
            "required": true
          }
        ]
      }
    ],
    "validation_config": {
      "run_lists": true,
      "run_crypto": false,
      "run_adverse_media": false
    }
  }'
```

### Response Format

```json
{
  "status": "success",
  "data": {
    "workflow_id": "550e8400-e29b-41d4-a716-446655440000",
    "tenant_id": "tenant123",
    "name": "Basic KYC",
    "description": "Standard KYC onboarding workflow",
    "steps": [
      {
        "step_id": "step_1",
        "order": 1,
        "name": "ID Document",
        "type": "document_upload",
        "required_documents": ["id"],
        "auto_extract": true
      }
    ],
    "validation_config": {
      "run_lists": true,
      "run_crypto": false,
      "run_adverse_media": false
    },
    "version": 1,
    "status": "active",
    "created_at": "2024-11-22T10:30:00Z",
    "updated_at": "2024-11-22T10:30:00Z"
  }
}
```

## Create from Template

Create a workflow from a pre-built template.

### Endpoint

```
POST /kyc/workflows/from-template/{type}
```

### Path Parameters

<ParamFields>
  <ParamField
    path="type"
    type="string"
    required
    description="Template type: 'basic-kyc'"
  />
</ParamFields>

### Request Example

```bash
curl -X POST https://stg.kyc.legaltalent.ai/kyc/workflows/from-template/basic-kyc \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "My Basic KYC Workflow"
  }'
```

## List Workflows

Retrieve all workflows for your tenant.

### Endpoint

```
GET /kyc/workflows
```

### Query Parameters

<ParamFields>
  <ParamField
    query="status"
    type="string"
    description="Filter by status: 'active' or 'deleted'"
  />
</ParamFields>

### Request Example

```bash
curl https://stg.kyc.legaltalent.ai/kyc/workflows \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### Response Format

```json
{
  "status": "success",
  "data": [
    {
      "workflow_id": "550e8400-e29b-41d4-a716-446655440000",
      "name": "Basic KYC",
      "status": "active",
      "version": 1,
      "created_at": "2024-11-22T10:30:00Z"
    }
  ]
}
```

## Get Workflow Details

Retrieve detailed information about a specific workflow.

### Endpoint

```
GET /kyc/workflows/{workflow_id}
```

### Path Parameters

<ParamFields>
  <ParamField
    path="workflow_id"
    type="string"
    required
    description="The workflow ID"
  />
</ParamFields>

### Request Example

```bash
curl https://stg.kyc.legaltalent.ai/kyc/workflows/550e8400-e29b-41d4-a716-446655440000 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## Update Workflow

Update a workflow (creates a new version).

### Endpoint

```
PUT /kyc/workflows/{workflow_id}
```

### Request Body

Same as create workflow, but all fields are optional (only include fields you want to update).

### Request Example

```bash
curl -X PUT https://stg.kyc.legaltalent.ai/kyc/workflows/550e8400-e29b-41d4-a716-446655440000 \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
      "name": "Updated Workflow Name",
      "validation_config": {
        "run_lists": true,
        "run_crypto": true,
        "run_adverse_media": true
      }
    }'
```

## Delete Workflow

Soft delete a workflow.

### Endpoint

```
DELETE /kyc/workflows/{workflow_id}
```

### Request Example

```bash
curl -X DELETE https://stg.kyc.legaltalent.ai/kyc/workflows/550e8400-e29b-41d4-a716-446655440000 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### Response Format

```json
{
  "status": "success",
  "message": "Workflow deleted successfully"
}
```

## List Workflow Versions

Retrieve all versions of a workflow.

### Endpoint

```
GET /kyc/workflows/{workflow_id}/versions
```

### Request Example

```bash
curl https://stg.kyc.legaltalent.ai/kyc/workflows/550e8400-e29b-41d4-a716-446655440000/versions \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## Status Codes

| Code | Description |
|------|-------------|
| 200 | Success |
| 201 | Created - Workflow created successfully |
| 400 | Bad Request - Invalid parameters |
| 401 | Unauthorized - Missing or invalid token |
| 403 | Forbidden - Insufficient permissions |
| 404 | Not Found - Workflow not found |
| 500 | Internal Server Error |

## Best Practices

- **Versioning**: Workflow updates create new versions - active sessions continue using their original version
- **Step Ordering**: Ensure step orders are sequential (1, 2, 3, etc.)
- **Required Documents**: Specify required document types for document_upload steps
- **Validation Config**: Configure validation checks based on your compliance requirements
- **Template Usage**: Use templates for common workflows to save time

## Integration Tips

1. **Workflow Design**: Design workflows to match your onboarding process
2. **Version Management**: Track workflow versions for audit purposes
3. **Session Creation**: Use workflow IDs when creating sessions
4. **Testing**: Test workflows thoroughly before deploying to production

