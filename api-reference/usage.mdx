---
title: 'Usage Metrics'
api: 'GET /kyc/usage'
---

Retrieve usage metrics and statistics for KYC operations. Track checks, validations, errors, and watchlist activity over time.

## Endpoint

```
GET /kyc/usage
```

## Authentication

Requires `usage:read` permission. Include your Bearer token in the Authorization header.

## Query Parameters

<ParamFields>
  <ParamField
    name="granularity"
    type="string"
    description="Time granularity: 'hour', 'day', or 'month' (default: 'day')"
  />
  <ParamField
    name="year_month"
    type="string"
    description="Month in format 'YYYY-MM' (default: current month) - used for 'hour' and 'day' granularities"
  />
  <ParamField
    name="date"
    type="string"
    description="Date in format 'YYYY-MM-DD' (required when granularity='hour')"
  />
  <ParamField
    name="months"
    type="integer"
    description="Number of months to retrieve (1-12, default: 1) - used for 'month' granularity"
  />
  <ParamField
    name="cache_bust"
    type="string"
    description="Set to 'true', '1', or 'yes' to bypass cache and return fresh data"
  />
</ParamFields>

## Granularity Options

| Granularity | Description | Default Period |
|-------------|----------|----------------|
| `hour` | 24 hourly data points for a specific day | Requires `date` parameter |
| `day` | Daily data points for a specific month | Default, up to 30 days |
| `month` | Monthly data points for up to 12 months | Default: 1 month |

## Request Examples

### Daily Granularity (Current Month)

<RequestExample>
```bash
curl "https://dev.kyc.legaltalent.ai/kyc/usage?granularity=day" \
  -H "Authorization: Bearer YOUR_TOKEN"
```
</RequestExample>

### Daily Granularity (Specific Month)

<RequestExample>
```bash
curl "https://dev.kyc.legaltalent.ai/kyc/usage?granularity=day&year_month=2024-10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```
</RequestExample>

### Hourly Granularity (Specific Day)

<RequestExample>
```bash
curl "https://dev.kyc.legaltalent.ai/kyc/usage?granularity=hour&date=2024-10-27" \
  -H "Authorization: Bearer YOUR_TOKEN"
```
</RequestExample>

### Monthly Granularity (Last 6 Months)

<RequestExample>
```bash
curl "https://dev.kyc.legaltalent.ai/kyc/usage?granularity=month&months=6" \
  -H "Authorization: Bearer YOUR_TOKEN"
```
</RequestExample>

### Invalidate Cache

<RequestExample>
```bash
curl "https://dev.kyc.legaltalent.ai/kyc/usage?granularity=day&cache_bust=true" \
  -H "Authorization: Bearer YOUR_TOKEN"
```
</RequestExample>

## Response Format

### Success Response (Daily Granularity)

<ResponseExample>
```json
{
  "tenant_id": "tenant123",
  "granularity": "day",
  "period": {
    "year_month": "2024-10"
  },
  "data": [
    {
      "timestamp": "2024-10-01",
      "metrics": {
        "check_count": 150,
        "validation_count": 145,
        "error_count": 5,
        "watchlist_scan_count": 20,
        "watchlist_invocation_count": 500
      }
    },
    {
      "timestamp": "2024-10-02",
      "metrics": {
        "check_count": 180,
        "validation_count": 175,
        "error_count": 5,
        "watchlist_scan_count": 25,
        "watchlist_invocation_count": 600
      }
    }
    // ... up to 30 days
  ],
  "summary": {
    "total_check_count": 4500,
    "total_validation_count": 4350,
    "total_error_count": 150,
    "total_watchlist_scan_count": 600,
    "total_watchlist_invocation_count": 15000
  }
}
```
</ResponseExample>

### Success Response (Hourly Granularity)

<ResponseExample>
```json
{
  "tenant_id": "tenant123",
  "granularity": "hour",
  "period": {
    "date": "2024-10-27"
  },
  "data": [
    {
      "timestamp": "2024-10-27T00:00:00Z",
      "metrics": {
        "check_count": 5,
        "validation_count": 5,
        "error_count": 0,
        "watchlist_scan_count": 0,
        "watchlist_invocation_count": 0
      }
    },
    {
      "timestamp": "2024-10-27T01:00:00Z",
      "metrics": {
        "check_count": 12,
        "validation_count": 12,
        "error_count": 0,
        "watchlist_scan_count": 1,
        "watchlist_invocation_count": 5
      }
    }
    // ... 24 hours
  ],
  "summary": {
    "total_check_count": 250,
    "total_validation_count": 245,
    "total_error_count": 5,
    "total_watchlist_scan_count": 10,
    "total_watchlist_invocation_count": 250
  }
}
```
</ResponseExample>

### Success Response (Monthly Granularity)

<ResponseExample>
```json
{
  "tenant_id": "tenant123",
  "granularity": "month",
  "period": {
    "months": 6
  },
  "data": [
    {
      "timestamp": "2024-05",
      "metrics": {
        "check_count": 12000,
        "validation_count": 11800,
        "error_count": 200,
        "watchlist_scan_count": 1500,
        "watchlist_invocation_count": 45000
      }
    },
    {
      "timestamp": "2024-06",
      "metrics": {
        "check_count": 15000,
        "validation_count": 14700,
        "error_count": 300,
        "watchlist_scan_count": 1800,
        "watchlist_invocation_count": 54000
      }
    }
    // ... up to 12 months
  ],
  "summary": {
    "total_check_count": 90000,
    "total_validation_count": 88200,
    "total_error_count": 1800,
    "total_watchlist_scan_count": 10800,
    "total_watchlist_invocation_count": 324000
  }
}
```
</ResponseExample>

## Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `tenant_id` | string | Your tenant identifier |
| `granularity` | string | Time granularity used |
| `period` | object | Period parameters (year_month, date, or months) |
| `data` | array | Array of timestamped metric objects |
| `summary` | object | Aggregated totals across all periods |

### Metric Fields

Each data point contains:

| Field | Type | Description |
|-------|------|-------------|
| `check_count` | integer | Total KYC checks performed |
| `validation_count` | integer | Successful validations |
| `error_count` | integer | Failed validations/errors |
| `watchlist_scan_count` | integer | Number of watchlist scans executed |
| `watchlist_invocation_count` | integer | Total watchlist invocations (subjects Ã— lists) |

## Usage Examples

### Python Example

<RequestExample>
```python
import requests
from datetime import datetime

token = "YOUR_TOKEN"
base_url = "https://dev.kyc.legaltalent.ai/kyc/usage"

# Get daily metrics for current month
response = requests.get(
    f"{base_url}?granularity=day",
    headers={"Authorization": f"Bearer {token}"}
)

if response.status_code == 200:
    data = response.json()
    print(f"Total checks this month: {data['summary']['total_check_count']}")
    
    # Plot daily trends
    for day in data['data']:
        print(f"{day['timestamp']}: {day['metrics']['check_count']} checks")
```
</RequestExample>

### JavaScript Example

<RequestExample>
```javascript
const token = "YOUR_TOKEN";

async function getUsageMetrics() {
  const response = await fetch(
    "https://dev.kyc.legaltalent.ai/kyc/usage?granularity=day",
    {
      headers: {
        "Authorization": `Bearer ${token}`
      }
    }
  );
  
  const data = await response.json();
  
  if (response.ok) {
    // Display summary
    console.log(`Total checks: ${data.summary.total_check_count}`);
    
    // Chart data points
    const chartData = data.data.map(point => ({
      date: point.timestamp,
      checks: point.metrics.check_count,
      errors: point.metrics.error_count
    }));
    
    // Use with charting library (Chart.js, D3, etc.)
    return chartData;
  } else {
    console.error("Error:", data.error);
  }
}
```
</RequestExample>

## Error Responses

### 400 Bad Request - Invalid Parameters

<ResponseExample>
```json
{
  "error": "Invalid date format. Expected YYYY-MM-DD"
}
```
</ResponseExample>

Common validation errors:
- Invalid date format
- Future dates/months
- Invalid granularity value
- Missing required `date` parameter for `hour` granularity
- `months` out of range (must be 1-12)

### 403 Forbidden - Missing Permission

<ResponseExample>
```json
{
  "error": "Permission denied: usage:read required"
}
```
</ResponseExample>

### 403 Forbidden - Missing Tenant

<ResponseExample>
```json
{
  "error": "Unauthorized: missing tenant_id"
}
```
</ResponseExample>

## Status Codes

| Code | Description |
|------|-------------|
| 200 | Success |
| 400 | Bad Request - Invalid parameters |
| 401 | Unauthorized - Missing or invalid token |
| 403 | Forbidden - Insufficient permissions |
| 500 | Internal Server Error |

## Caching

- Responses are cached for 5 minutes
- Use `cache_bust=true` to force fresh data
- Cache headers: `Cache-Control: max-age=300`
- With `cache_bust`: `Cache-Control: no-cache, no-store`

## Data Characteristics

- **Gap Filling**: All periods (even with zero activity) are included for continuous charts
- **Immutability**: Historical data never changes, so responses are cacheable
- **Real-time**: Current day/hour data updates as requests are processed
- **Retention**: Metrics are retained for at least 12 months

## Frontend Integration Tips

The response structure is optimized for graph visualization:

```javascript
// Daily granularity - 30 data points
{
  data: [
    { timestamp: "2024-10-01", metrics: {...} },
    { timestamp: "2024-10-02", metrics: {...} },
    // ... continuous, no gaps
  ]
}

// Use with any charting library
const labels = data.data.map(d => d.timestamp);
const checks = data.data.map(d => d.metrics.check_count);
const errors = data.data.map(d => d.metrics.error_count);
```

